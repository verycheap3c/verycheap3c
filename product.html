<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>Áî¢ÂìÅ‰ªãÁ¥π</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="logo.ico">
  <style>
    body{ font-family:sans-serif; background:#f7f7f7; margin:0; user-select:none;}
    .container{ max-width:1000px; margin:30px auto; background:#fff; border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,.08); padding:20px; }
    .topbar{ display:flex; align-items:center; justify-content:space-between; margin-bottom:10px; }
    a{ color:#111; text-decoration:none; }
    .product{ display:grid; grid-template-columns: 1fr 1fr; gap:24px; }
    .product img{ width:100%; border-radius:12px; object-fit:cover; }
    .title{ font-size:28px; font-weight:bold; margin:8px 0; }
    .price{ font-size:22px; color:#d00; margin:6px 0; }
    .old{ color:gray; font-size:14px; text-decoration:line-through; }
    .stock{ font-size:14px; color:#444; }
    .desc{ margin-top:12px; line-height:1.6; color:#333; }
    .actions{ display:flex; align-items:center; gap:10px; margin-top:16px; }
    .btn{ padding:10px 14px; border:1px solid #111; background:#fff; border-radius:10px; cursor:pointer; }
    .btn:hover{ background:#111; color:#fff; }
    .qty-display{ min-width:30px; text-align:center; font-size:16px; }
    .cart-link{ font-weight:bold; }
    .badge{ display:inline-block; min-width:20px; padding:2px 6px; font-size:12px; border-radius:10px; background:#111; color:#fff; text-align:center; margin-left:6px; }
    @media (max-width: 820px){ .product{ grid-template-columns: 1fr; } }
    /* ÈüøÊáâÂºèË™øÊï¥ */
@media (max-width: 1024px) {
  .product {
    grid-template-columns: 1fr;
    text-align: center;
  }
  .product img {
    max-width: 80%;
    height: auto;
    margin: 0 auto;
  }
  .title {
    font-size: 24px;
  }
  .price {
    font-size: 20px;
  }
  .btn {
    font-size: 14px;
    padding: 10px 14px;
  }
}

@media (max-width: 768px) {
  .title {
    font-size: 22px;
  }
  .price {
    font-size: 18px;
  }
  .old {
    font-size: 14px;
  }
  .btn {
    font-size: 16px;
    padding: 12px 18px;
  }
}

@media (max-width: 480px) {
  .title {
    font-size: 20px;
  }
  .price {
    font-size: 18px;
  }
  .old {
    font-size: 14px;
  }
  .desc {
    font-size: 14px;
  }
  .btn {
    font-size: 16px;
    padding: 14px 20px;
  }
}
  </style>
</head>
<body>
  <div class="container">
    <div class="topbar">
      <a href="index.html">‚Üê ÂõûÂà∞È¶ñÈ†Å</a>
      <a class="cart-link" href="cart.html">üõí Ë≥ºÁâ©Ëªä <span id="cartCount" class="badge">0</span></a>
    </div>

    <div id="product" class="product">
      <!-- Áî± JS Ê≥®ÂÖ• -->
    </div>
  </div>

  <script>
    function getQueryId(){
      const u = new URL(location.href);
      return u.searchParams.get('id') || '';
    }
    function getDB(){
      const raw = localStorage.getItem('PRODUCTS_DB');
      if(raw){ try{ return JSON.parse(raw); }catch{} }
      return {
        p001:{ id:"p001", name:"iPhone 16 Pro", price:32000, original:36900, stock:757,  img:"iphone_16_pro.png", desc:"iPhone ÁöÑÊ•µËá¥„ÄÇ" },
        p002:{ id:"p002", name:"iPhone 16",     price:26000, original:29900, stock:6539, img:"iphone_16.png",     desc:"ÊªøËºâÂº∑Â§ßÂØ¶Âäõ„ÄÇ" },
        p003:{ id:"p003", name:"iPhone 16e",    price:18500, original:21900, stock:8881, img:"iphone_16e.png",    desc:"ÊúÄÊñ∞ iPhoneÔºåË∂ÖÂÄºË∂ÖÂÄºÂæó„ÄÇ" },
        p004:{ id:"p004", name:"iPhone 15",     price:22000, original:25900, stock:1402, img:"iphone_15.png",     desc:"ÈÇÑÊòØË∂ÖËÆöÔºåÊ≤íËÆä„ÄÇ" },
        p101:{ id:"p101", name:"USB C Ë±ÜËÖêÈ†≠(Ë≤∑‰∏ÄÈÄÅ‰∏Ä)", price:99,  original:199, stock:2237, img:"000001_1662535030.webp", desc:"Â•ΩÁî®„ÄÇ" },
        p102:{ id:"p102", name:"Type C,USB C ÈõôÂ≠îË±ÜËÖêÈ†≠",  price:199, original:299, stock:3909, img:"images.jpg",             desc:"Â•ΩÁî®„ÄÇ" },
        p103:{ id:"p103", name:"ÂΩ©Ëâ≤Ë°åÂãïÈõªÊ∫ê",           price:499, original:599, stock:4727, img:"aukey-cubie-10000mah-pb-y55-01-o1000.webp", desc:"Â•ΩÁî®„ÄÇ" },
        p104:{ id:"p104", name:"Â§öÂäüËÉΩË°åÂãïÈõªÊ∫ê",          price:699, original:799, stock:8940, img:"‰∏ãËºâ.jpg",                 desc:"Â•ΩÁî®„ÄÇ" },
        p201:{ id:"p201", name:"Type C to C ÂÖÖÈõªÁ∑ö",       price:99,  original:199, stock:1036, img:"MQKJ3.jpg",  desc:"Â•ΩÁî®„ÄÇ" },
        p202:{ id:"p202", name:"lighting to C ÂÖÖÈõªÁ∑ö",     price:99,  original:199, stock:9760, img:"MM0A3.jpg",  desc:"Â•ΩÁî®„ÄÇ" },
        p203:{ id:"p203", name:"Type C to USB C ÂÖÖÈõªÁ∑ö",   price:49,  original:149, stock:9878, img:"6592967_R1_m.webp", desc:"Â•ΩÁî®„ÄÇ" },
        p204:{ id:"p204", name:"lighting to USB C ÂÖÖÈõªÁ∑ö", price:49,  original:149, stock:5755, img:"1ED27519CFFFA86FAAD50B998CC419DE04775902.jpg", desc:"Â•ΩÁî®„ÄÇ" }
      };
    }

    function getCart(){ try{ return JSON.parse(localStorage.getItem('cart')||'[]'); }catch{ return []; } }
    function setCart(c){ localStorage.setItem('cart', JSON.stringify(c)); }
    function cartCount(){ return getCart().reduce((s,i)=>s+(i.qty||0),0); }
    function updateCartCount(){ const el=document.getElementById('cartCount'); if(el) el.textContent = cartCount(); }
    function addToCart(p, qty){
      const c = getCart();
      const ex = c.find(i=>i.id===p.id);
      if(ex){ ex.qty = Math.min(ex.qty + qty, 10); } 
      else { c.push({id:p.id,name:p.name,price:p.price,img:p.img,qty:Math.min(qty,10)}); }
      setCart(c);
      updateCartCount();
      alert('Â∑≤Âä†ÂÖ•Ë≥ºÁâ©Ëªä');
    }

    const DB = getDB();
    const id = getQueryId();
    const p = DB[id];
    const host = document.getElementById('product');

    if(!p){
      host.innerHTML = `<p>Êâæ‰∏çÂà∞Ê≠§ÂïÜÂìÅ„ÄÇ</p>`;
    }else{
      host.innerHTML = `
        <div><img src="${p.img}" alt="${p.name}"></div>
        <div>
          <div class="title">${p.name}</div>
          <div class="price">Á†¥Áõ§ÂÉπÔºöNT$${p.price.toLocaleString()}</div>
          <div class="old">ÂéüÂÉπÔºöNT$${p.original.toLocaleString()}</div>
          <div class="stock">Â∫´Â≠òÔºö${p.stock}</div>
          <div class="desc">${p.desc}</div>
          <div class="actions">
            <button id="minusBtn" class="btn">Ôºç</button>
            <span id="qtyDisplay" class="qty-display">1</span>
            <button id="plusBtn" class="btn">Ôºã</button>
            <button id="addBtn" class="btn">Âä†ÂÖ•Ë≥ºÁâ©Ëªä</button>
          </div>
        </div>
      `;

      let currentQty = 1;
      const maxQty = 10;

      const qtyDisplay = document.getElementById('qtyDisplay');
      document.getElementById('minusBtn').addEventListener('click', () => {
        if(currentQty > 1){
          currentQty--;
          qtyDisplay.textContent = currentQty;
        }
      });

      document.getElementById('plusBtn').addEventListener('click', () => {
        if(currentQty < maxQty){
          currentQty++;
          qtyDisplay.textContent = currentQty;
        }
      });

      document.getElementById('addBtn').addEventListener('click', () => {
        addToCart(p, currentQty);
      });
    }

    updateCartCount();
  </script>
</div>
</body>
</html>
